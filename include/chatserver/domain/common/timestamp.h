#pragma once
// Гарантирует, что этот заголовочный файл будет включен только один раз 
// во время компиляции.
#include <chrono>
// Подключает стандартную библиотеку для работы со временем: часы, точки времени,
// преобразования в секунды и т.д.
#include <cstdint>
// Подключает фиксированные целочисленные типы, такие как std::int64_t,
// чтобы гарантировать одинаковый размер числа на всех платформах.

namespace chatserver::domain {
// Открываем пространство имён domain внутри chatserver.
// Здесь находятся сущности предметной области (DDD).

class Timestamp {
    // Класс представляет собой обертку над временем в секундах от эпохи Unix.
    // Используется как Value Object в доменной модели.
public:
    using clock = std::chrono::system_clock;
    // Определяем псевдоним clock, чтобы явно указать, какие часы используются.
    // system_clock - стандартные "реальные" часы, привязанные к системному времени.

    static Timestamp now();
    // Статический фабричный метод, создающий Timestamp с текущим временем.
    // Реализация обычно вызывает clock::now() и преобразует в секунды.

    explicit Timestamp(std::int64_t epochSeconds);
    // Конструктор принимаетт количество секунд с 1 января 1970 года (Unix epoch).
    // explicit предотвращает неявные преобразования из int64_t в Timestamp.

    std::int64_t epoch_seconds() const;
    // Геттер, возвращающий внутреннее значение времени в секундах.
    // const гарантирует, что метод не изменяет объект.

    bool operator==(const Timestamp& other) const;
    // Оператор сравнения на равенство. Сравнивает два Timestamp по epochSeconds_.

    bool operator<(const Timestamp& other) const;
    // Оператор меньше. Позволяет сортировать Timestamp и использовать в map/set.

private:
    std::int64_t epochSeconds_;
    // Внутреннее хранение времени в секундах от эпохи.
    // int64_t позволяет хранить даты на десятки тясяч лет вперед/назад.
};

}

